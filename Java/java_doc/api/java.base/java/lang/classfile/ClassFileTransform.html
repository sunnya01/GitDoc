<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>ClassFileTransform (Java SE 25 &amp; JDK 25)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: module: java.base, package: java.lang.classfile, interface: ClassFileTransform">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="java.lang.classfile.ClassFileTransform interface">
<meta name="keywords" content="accept()">
<meta name="keywords" content="atEnd()">
<meta name="keywords" content="atStart()">
<meta name="keywords" content="andThen()">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ClassFileTransform.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><div><strong>Java SE 25 &amp; JDK 25</strong> </div></div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../../module-summary.html">java.base</a></li>
<li><a href="package-summary.html">java.lang.classfile</a></li>
<li><a href="ClassFileTransform.html" class="current-selection">ClassFileTransform</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#accept(B,E)" tabindex="0">accept(B, E)</a></li>
<li><a href="#atEnd(B)" tabindex="0">atEnd(B)</a></li>
<li><a href="#atStart(B)" tabindex="0">atStart(B)</a></li>
<li><a href="#andThen(C)" tabindex="0">andThen(C)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Interface ClassFileTransform" class="title">Interface ClassFileTransform&lt;C extends ClassFileTransform&lt;C,<wbr>E,<wbr>B&gt;, E extends <a href="ClassFileElement.html" title="interface in java.lang.classfile">ClassFileElement</a>, B extends <a href="ClassFileBuilder.html" title="interface in java.lang.classfile">ClassFileBuilder</a>&lt;E,<wbr>B&gt;&gt;</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="type-param-C"><code>C</code> - the transform type</span></dd>
<dd><span id="type-param-E"><code>E</code> - the member element type</span></dd>
<dd><span id="type-param-B"><code>B</code> - the builder type</span></dd>
</dl>
<dl class="notes">
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="ClassTransform.html" title="interface in java.lang.classfile">ClassTransform</a>, <a href="CodeTransform.html" title="interface in java.lang.classfile">CodeTransform</a>, <a href="FieldTransform.html" title="interface in java.lang.classfile">FieldTransform</a>, <a href="MethodTransform.html" title="interface in java.lang.classfile">MethodTransform</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public sealed interface </span><span class="element-name type-name-label">ClassFileTransform&lt;C extends ClassFileTransform&lt;C,<wbr>E,<wbr>B&gt;, E extends <a href="ClassFileElement.html" title="interface in java.lang.classfile">ClassFileElement</a>, B extends <a href="ClassFileBuilder.html" title="interface in java.lang.classfile">ClassFileBuilder</a>&lt;E,<wbr>B&gt;&gt;</span>
<span class="permits">permits <a href="ClassTransform.html" title="interface in java.lang.classfile">ClassTransform</a>, <a href="FieldTransform.html" title="interface in java.lang.classfile">FieldTransform</a>, <a href="MethodTransform.html" title="interface in java.lang.classfile">MethodTransform</a>, <a href="CodeTransform.html" title="interface in java.lang.classfile">CodeTransform</a></span></div>
<div class="block">A transformation on a <a href="CompoundElement.html" title="interface in java.lang.classfile"><code>CompoundElement</code></a> by processing its individual
member elements and sending the results to a <a href="ClassFileBuilder.html" title="interface in java.lang.classfile"><code>ClassFileBuilder</code></a>,
through <a href="ClassFileBuilder.html#transform(java.lang.classfile.CompoundElement,java.lang.classfile.ClassFileTransform)"><code>ClassFileBuilder.transform(CompoundElement, ClassFileTransform)</code></a>.  A subtype of <code>
ClassFileTransform</code> is defined for each subtype of <a href="CompoundElement.html" title="interface in java.lang.classfile"><code>CompoundElement</code></a>
and <a href="ClassFileBuilder.html" title="interface in java.lang.classfile"><code>ClassFileBuilder</code></a>, as shown in the sealed class hierarchy below.
<p>
For example, this is a basic transformation of a <a href="CodeModel.html" title="interface in java.lang.classfile"><code>CodeModel</code></a> that
redirects all calls to static methods in the <code>Foo</code> class to the <code>
Bar</code> class, preserving all other elements:
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.classfile.ClassFileTransform1"><code class="language-java">CodeTransform fooToBar = (b, e) -&gt; {
    if (e instanceof InvokeInstruction i
            &amp;&amp; i.owner().name().equalsString("Foo")
            &amp;&amp; i.opcode() == Opcode.INVOKESTATIC) {
        // remove the old element i by doing nothing to the builder
        // add a new invokestatic instruction to the builder
        b.invokestatic(CD_Bar, i.name().stringValue(), i.typeSymbol(), i.isInterface());
    } else {
        b.with(e);  // leaves the element in place
    }
};
</code></pre>
</div>

Note that if no transformation of a member element is desired, the element
should be presented to <a href="ClassFileBuilder.html#with(E)"><code>builder::with</code></a>.  If no
action is taken, that member element is dropped.
<p>
More advanced usages of transforms include <a href="#start-end">start or
end handling</a>, <a href="#stateful">stateful transformation</a> that makes a
decision based on previously encountered member elements, and <a href="#composition">composition</a> of transforms, where one transform processes the
results of a previous transform on the input compound structure.  All these
capabilities are supported by this interface and accessible to user transform
implementations.
<p id="start-end">
Users can define custom start and end handling for a transform by overriding
<a href="#atStart(B)"><code>atStart(B)</code></a> and <a href="#atEnd(B)"><code>atEnd(B)</code></a>.  The start handler is called before any
member element is processed, and the end handler is called after all member
elements are processed.  For example, the start handler can be used to inject
extra code elements to the beginning of a code array, and the end handler,
combined with stateful transformation, can perform cleanup actions, such as
determining if an attribute has been merged, or if a new attribute should be
defined.  Each subtype of <code>ClassFileTransform</code> defines a utility method
<code>endHandler</code> that returns a transform that only has end handling.
<p id="stateful">
Transforms can have states that persist across processing of individual
member elements.  For example, if a transform injects an annotation, the
transform may keep track if it has encountered and presented an updated
<a href="attribute/RuntimeVisibleAnnotationsAttribute.html" title="interface in java.lang.classfile.attribute"><code>RuntimeVisibleAnnotationsAttribute</code></a> to the builder; if it has not yet,
it can present a new attribute containing only the injected annotation in its
end handler.  If such a transform is to be shared or reused, each returned
transform should have its own state.  Each subtype of <code>ClassFileTransform</code>
defines a utility method <code>ofStateful</code> where a supplier creates the
transform at its initial state each time the transform is reused.
<p id="composition">
Transforms can be composed via <a href="#andThen(C)"><code>andThen(C)</code></a>.  When this transform is
composed with another transform, it means the output member elements received
by the <a href="ClassFileBuilder.html" title="interface in java.lang.classfile"><code>ClassFileBuilder</code></a> become the input elements to that other
transform.  Composition avoids building intermediate structures for multiple
transforms to run on.  Each subtype of <code>ClassFileTransform</code> implements
<a href="#andThen(C)"><code>andThen(C)</code></a>, which generally should not be implemented by users.
<p>
Transforms that run on smaller structures can be lifted to its enclosing
structures to selectively run on all enclosed smaller structures of the same
kind.  For example, a <a href="CodeTransform.html" title="interface in java.lang.classfile"><code>CodeTransform</code></a> can be lifted via <a href="ClassTransform.html#transformingMethodBodies(java.util.function.Predicate,java.lang.classfile.CodeTransform)"><code>ClassTransform.transformingMethodBodies(Predicate, CodeTransform)</code></a> to
transform the method body of select methods in the class it runs on.  This
allows users to write small transforms and apply to larger scales.
<p>
Besides <a href="ClassFileBuilder.html#transform(java.lang.classfile.CompoundElement,java.lang.classfile.ClassFileTransform)"><code>ClassFileBuilder.transform(CompoundElement, ClassFileTransform)</code></a>, there are other methods that
accepts a transform conveniently, such as <a href="ClassFile.html#transformClass(java.lang.classfile.ClassModel,java.lang.classfile.ClassTransform)"><code>ClassFile.transformClass(ClassModel, ClassTransform)</code></a>,
<a href="ClassBuilder.html#transformField(java.lang.classfile.FieldModel,java.lang.classfile.FieldTransform)"><code>ClassBuilder.transformField(FieldModel, FieldTransform)</code></a>, <a href="ClassBuilder.html#transformMethod(java.lang.classfile.MethodModel,java.lang.classfile.MethodTransform)"><code>ClassBuilder.transformMethod(MethodModel, MethodTransform)</code></a>, or
<a href="MethodBuilder.html#transformCode(java.lang.classfile.CodeModel,java.lang.classfile.CodeTransform)"><code>MethodBuilder.transformCode(CodeModel, CodeTransform)</code></a>.  They are convenience methods that suit
the majority of transformation scenarios.</div>
<dl class="notes"><dt>Sealed Class Hierarchy Graph:</dt><dd><a class="sealed-graph" href="ClassFileTransform-sealed-graph.svg"><img style="vertical-align:top" alt="Sealed class hierarchy graph for ClassFileTransform" src="ClassFileTransform-sealed-graph.svg" height="100"><span><img style="border: solid lightgray 1px; vertical-align:top" alt="Sealed class hierarchy graph for ClassFileTransform" src="ClassFileTransform-sealed-graph.svg"></span></a></dd>
<dt>Since:</dt>
<dd>24</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#accept(B,E)" class="member-name-link">accept</a><wbr>(<a href="#type-param-B" title="type parameter in ClassFileTransform">B</a>&nbsp;builder,
 <a href="#type-param-E" title="type parameter in ClassFileTransform">E</a>&nbsp;element)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Transform an element by taking the appropriate actions on the builder.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#type-param-C" title="type parameter in ClassFileTransform">C</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#andThen(C)" class="member-name-link">andThen</a><wbr>(<a href="#type-param-C" title="type parameter in ClassFileTransform">C</a>&nbsp;next)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Chain this transform with another; elements presented to the builder of
this transform will become the input to the next transform.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#atEnd(B)" class="member-name-link">atEnd</a><wbr>(<a href="#type-param-B" title="type parameter in ClassFileTransform">B</a>&nbsp;builder)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Take any final action during transformation of a classfile entity.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#atStart(B)" class="member-name-link">atStart</a><wbr>(<a href="#type-param-B" title="type parameter in ClassFileTransform">B</a>&nbsp;builder)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Take any preliminary action during transformation of a classfile entity.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="accept(B,E)">
<h3 id="accept(java.lang.classfile.ClassFileBuilder,java.lang.classfile.ClassFileElement)">accept</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">accept</span><wbr><span class="parameters">(<a href="#type-param-B" title="type parameter in ClassFileTransform">B</a>&nbsp;builder,
 <a href="#type-param-E" title="type parameter in ClassFileTransform">E</a>&nbsp;element)</span></div>
<div class="block">Transform an element by taking the appropriate actions on the builder.
Used when transforming a classfile entity (class, method, field, method
body.) If no transformation is desired, the element can be presented to
<a href="ClassFileBuilder.html#with(E)"><code>ClassFileBuilder.with(ClassFileElement)</code></a>.  If the element is to be dropped, no
action is required.
<p>
This method is called by the Class-File API.  Users should never call
this method.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>builder</code> - the builder for the new entity</dd>
<dd><code>element</code> - the element</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="atEnd(B)">
<h3 id="atEnd(java.lang.classfile.ClassFileBuilder)">atEnd</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">atEnd</span><wbr><span class="parameters">(<a href="#type-param-B" title="type parameter in ClassFileTransform">B</a>&nbsp;builder)</span></div>
<div class="block">Take any final action during transformation of a classfile entity.  Called
after all elements of the class are presented to <a href="#accept(B,E)"><code>accept(ClassFileBuilder, ClassFileElement)</code></a>.
<p>
This method is called by the Class-File API.  Users should never call
this method.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>The default implementation does nothing.</dd>
<dt>Parameters:</dt>
<dd><code>builder</code> - the builder for the new entity</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="atStart(B)">
<h3 id="atStart(java.lang.classfile.ClassFileBuilder)">atStart</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">atStart</span><wbr><span class="parameters">(<a href="#type-param-B" title="type parameter in ClassFileTransform">B</a>&nbsp;builder)</span></div>
<div class="block">Take any preliminary action during transformation of a classfile entity.
Called before any elements of the class are presented to <a href="#accept(B,E)"><code>accept(ClassFileBuilder, ClassFileElement)</code></a>.
<p>
This method is called by the Class-File API.  Users should never call
this method.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>The default implementation does nothing.</dd>
<dt>Parameters:</dt>
<dd><code>builder</code> - the builder for the new entity</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="andThen(C)">
<h3 id="andThen(java.lang.classfile.ClassFileTransform)">andThen</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="#type-param-C" title="type parameter in ClassFileTransform">C</a></span>&nbsp;<span class="element-name">andThen</span><wbr><span class="parameters">(<a href="#type-param-C" title="type parameter in ClassFileTransform">C</a>&nbsp;next)</span></div>
<div class="block">Chain this transform with another; elements presented to the builder of
this transform will become the input to the next transform.
<p>
This method is implemented by the Class-File API.  Users usually don't
have sufficient access to Class-File API functionalities to override this
method correctly for generic downstream transforms.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>next</code> - the downstream transform</dd>
<dt>Returns:</dt>
<dd>the chained transform</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase25&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2025, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java25speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 25.0.1+8-LTS-27 --></small></p>
</footer>
</main>
</div>
</body>
</html>
