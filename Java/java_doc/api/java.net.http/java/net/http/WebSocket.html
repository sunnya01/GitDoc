<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>WebSocket (Java SE 25 &amp; JDK 25)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: module: java.net.http, package: java.net.http, interface: WebSocket">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="java.net.http.WebSocket interface">
<meta name="keywords" content="NORMAL_CLOSURE">
<meta name="keywords" content="sendText()">
<meta name="keywords" content="sendBinary()">
<meta name="keywords" content="sendPing()">
<meta name="keywords" content="sendPong()">
<meta name="keywords" content="sendClose()">
<meta name="keywords" content="request()">
<meta name="keywords" content="getSubprotocol()">
<meta name="keywords" content="isOutputClosed()">
<meta name="keywords" content="isInputClosed()">
<meta name="keywords" content="abort()">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/WebSocket.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><div><strong>Java SE 25 &amp; JDK 25</strong> </div></div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../../module-summary.html">java.net.http</a></li>
<li><a href="package-summary.html">java.net.http</a></li>
<li><a href="WebSocket.html" class="current-selection">WebSocket</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#field-summary" tabindex="0">Field Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#field-detail" tabindex="0">Field Details</a>
<ol class="toc-list">
<li><a href="#NORMAL_CLOSURE" tabindex="0">NORMAL_CLOSURE</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#sendText(java.lang.CharSequence,boolean)" tabindex="0">sendText(CharSequence, boolean)</a></li>
<li><a href="#sendBinary(java.nio.ByteBuffer,boolean)" tabindex="0">sendBinary(ByteBuffer, boolean)</a></li>
<li><a href="#sendPing(java.nio.ByteBuffer)" tabindex="0">sendPing(ByteBuffer)</a></li>
<li><a href="#sendPong(java.nio.ByteBuffer)" tabindex="0">sendPong(ByteBuffer)</a></li>
<li><a href="#sendClose(int,java.lang.String)" tabindex="0">sendClose(int, String)</a></li>
<li><a href="#request(long)" tabindex="0">request(long)</a></li>
<li><a href="#getSubprotocol()" tabindex="0">getSubprotocol()</a></li>
<li><a href="#isOutputClosed()" tabindex="0">isOutputClosed()</a></li>
<li><a href="#isInputClosed()" tabindex="0">isInputClosed()</a></li>
<li><a href="#abort()" tabindex="0">abort()</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Interface WebSocket" class="title">Interface WebSocket</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">WebSocket</span></div>
<div class="block">A WebSocket Client.

<p> <code>WebSocket</code> instances are created through <a href="WebSocket.Builder.html" title="interface in java.net.http"><code>WebSocket.Builder</code></a>.

<p> WebSocket has an input and an output side. These sides are independent
from each other. A side can either be open or closed. Once closed, the side
remains closed. WebSocket messages are sent through a <code>WebSocket</code> and
received through a <code>WebSocket.Listener</code> associated with it. Messages
can be sent until the WebSocket's output is closed, and received until the
WebSocket's input is closed.

<p> A send method is any of the <code>sendText</code>, <code>sendBinary</code>,
<code>sendPing</code>, <code>sendPong</code> and <code>sendClose</code> methods of
<code>WebSocket</code>. A send method initiates a send operation and returns a
<code>CompletableFuture</code> which completes once the operation has completed.
If the <code>CompletableFuture</code> completes normally the operation is
considered succeeded. If the <code>CompletableFuture</code> completes
exceptionally, the operation is considered failed. An operation that has been
initiated but not yet completed is considered pending.

<p> A receive method is any of the <code>onText</code>, <code>onBinary</code>,
<code>onPing</code>, <code>onPong</code> and <code>onClose</code> methods of
<code>Listener</code>. WebSocket initiates a receive operation by invoking a
receive method on the listener. The listener then must return a
<code>CompletionStage</code> which completes once the operation has completed.

<p> To control receiving of messages, a WebSocket maintains an
<a id="counter">internal counter</a>. This counter's value is a number of
times the WebSocket has yet to invoke a receive method. While this counter is
zero the WebSocket does not invoke receive methods. The counter is
incremented by <code>n</code> when <code>request(n)</code> is called. The counter is
decremented by one when the WebSocket invokes a receive method.
<code>onOpen</code> and <code>onError</code> are not receive methods. WebSocket invokes
<code>onOpen</code> prior to any other methods on the listener. WebSocket invokes
<code>onOpen</code> at most once. WebSocket may invoke <code>onError</code> at any
given time. If the WebSocket invokes <code>onError</code> or <code>onClose</code>, then
no further listener's methods will be invoked, no matter the value of the
counter. For a newly built WebSocket the counter is zero.

<p> Unless otherwise stated, <code>null</code> arguments will cause methods
of <code>WebSocket</code> to throw <code>NullPointerException</code>, similarly,
<code>WebSocket</code> will not pass <code>null</code> arguments to methods of
<code>Listener</code>. The state of a WebSocket is not changed by the invocations
that throw or return a <code>CompletableFuture</code> that completes with one of
the <code>NullPointerException</code>, <code>IllegalArgumentException</code>,
<code>IllegalStateException</code> exceptions.

<p> <code>WebSocket</code> handles received Ping and Close messages automatically
(as per the WebSocket Protocol) by replying with Pong and Close messages. If
the listener receives Ping or Close messages, no mandatory actions from the
listener are required.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>The relationship between a WebSocket and the associated Listener is
analogous to that of a Subscription and the associated Subscriber of type
<a href="../../../../java.base/java/util/concurrent/Flow.html" title="class in java.util.concurrent"><code>Flow</code></a>.</dd>
<dt>Since:</dt>
<dd>11</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Interface</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="WebSocket.Builder.html" class="type-name-link" title="interface in java.net.http">WebSocket.Builder</a></code></div>
<div class="col-last even-row-color">
<div class="block">A builder of <a href="WebSocket.html" title="interface in java.net.http">WebSocket Clients</a>.</div>
</div>
<div class="col-first odd-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="WebSocket.Listener.html" class="type-name-link" title="interface in java.net.http">WebSocket.Listener</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The receiving interface of <code>WebSocket</code>.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#NORMAL_CLOSURE" class="member-name-link">NORMAL_CLOSURE</a></code></div>
<div class="col-last even-row-color">
<div class="block">The WebSocket Close message status code (<code>1000</code>),
indicating normal closure, meaning that the purpose for which the
connection was established has been fulfilled.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#abort()" class="member-name-link">abort</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Closes this WebSocket's input and output abruptly.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getSubprotocol()" class="member-name-link">getSubprotocol</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the subprotocol used by this WebSocket.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isInputClosed()" class="member-name-link">isInputClosed</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Tells whether this WebSocket's input is closed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isOutputClosed()" class="member-name-link">isOutputClosed</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Tells whether this WebSocket's output is closed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#request(long)" class="member-name-link">request</a><wbr>(long&nbsp;n)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Increments the counter of invocations of receive methods.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#sendBinary(java.nio.ByteBuffer,boolean)" class="member-name-link">sendBinary</a><wbr>(<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;data,
 boolean&nbsp;last)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Sends binary data with bytes from the given buffer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#sendClose(int,java.lang.String)" class="member-name-link">sendClose</a><wbr>(int&nbsp;statusCode,
 <a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;reason)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Initiates an orderly closure of this WebSocket's output by
sending a Close message with the given status code and the reason.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#sendPing(java.nio.ByteBuffer)" class="member-name-link">sendPing</a><wbr>(<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Sends a Ping message with bytes from the given buffer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#sendPong(java.nio.ByteBuffer)" class="member-name-link">sendPong</a><wbr>(<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Sends a Pong message with bytes from the given buffer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#sendText(java.lang.CharSequence,boolean)" class="member-name-link">sendText</a><wbr>(<a href="../../../../java.base/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;data,
 boolean&nbsp;last)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Sends textual data with characters from the given character sequence.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="NORMAL_CLOSURE">
<h3>NORMAL_CLOSURE</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">NORMAL_CLOSURE</span></div>
<div class="block">The WebSocket Close message status code (<code>1000</code>),
indicating normal closure, meaning that the purpose for which the
connection was established has been fulfilled.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#sendClose(int,java.lang.String)"><code>sendClose(int, String)</code></a></li>
<li><a href="WebSocket.Listener.html#onClose(java.net.http.WebSocket,int,java.lang.String)"><code>WebSocket.Listener.onClose(WebSocket, int, String)</code></a></li>
<li><a href="../../../../constant-values.html#java.net.http.WebSocket.NORMAL_CLOSURE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="sendText(java.lang.CharSequence,boolean)">
<h3>sendText</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</span>&nbsp;<span class="element-name">sendText</span><wbr><span class="parameters">(<a href="../../../../java.base/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;data,
 boolean&nbsp;last)</span></div>
<div class="block">Sends textual data with characters from the given character sequence.

<p> The character sequence must not be modified until the
<code>CompletableFuture</code> returned from this method has completed.

<p> A <code>CompletableFuture</code> returned from this method can
complete exceptionally with:
<ul>
<li> <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a> -
         if there is a pending text or binary send operation
         or if the previous binary data does not complete the message
<li> <a href="../../../../java.base/java/io/IOException.html" title="class in java.io"><code>IOException</code></a> -
         if an I/O error occurs, or if the output is closed
</ul></div>
<dl class="notes">
<dt>Implementation Note:</dt>
<dd>If <code>data</code> is a malformed UTF-16 sequence, the operation
will fail with <code>IOException</code>.</dd>
<dt>Parameters:</dt>
<dd><code>data</code> - the data</dd>
<dd><code>last</code> - <code>true</code> if this invocation completes the message,
        <code>false</code> otherwise</dd>
<dt>Returns:</dt>
<dd>a <code>CompletableFuture</code> that completes, with this WebSocket,
when the data has been sent</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="sendBinary(java.nio.ByteBuffer,boolean)">
<h3>sendBinary</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</span>&nbsp;<span class="element-name">sendBinary</span><wbr><span class="parameters">(<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;data,
 boolean&nbsp;last)</span></div>
<div class="block">Sends binary data with bytes from the given buffer.

<p> The data is located in bytes from the buffer's position to its limit.
Upon normal completion of a <code>CompletableFuture</code> returned from this
method the buffer will have no remaining bytes. The buffer must not be
accessed until after that.

<p> The <code>CompletableFuture</code> returned from this method can
complete exceptionally with:
<ul>
<li> <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a> -
         if there is a pending text or binary send operation
         or if the previous textual data does not complete the message
<li> <a href="../../../../java.base/java/io/IOException.html" title="class in java.io"><code>IOException</code></a> -
         if an I/O error occurs, or if the output is closed
</ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - the data</dd>
<dd><code>last</code> - <code>true</code> if this invocation completes the message,
        <code>false</code> otherwise</dd>
<dt>Returns:</dt>
<dd>a <code>CompletableFuture</code> that completes, with this WebSocket,
when the data has been sent</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="sendPing(java.nio.ByteBuffer)">
<h3>sendPing</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</span>&nbsp;<span class="element-name">sendPing</span><wbr><span class="parameters">(<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</span></div>
<div class="block">Sends a Ping message with bytes from the given buffer.

<p> The message consists of not more than <code>125</code> bytes from the
buffer's position to its limit. Upon normal completion of a
<code>CompletableFuture</code> returned from this method the buffer will
have no remaining bytes. The buffer must not be accessed until after that.

<p> The <code>CompletableFuture</code> returned from this method can
complete exceptionally with:
<ul>
<li> <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a> -
         if there is a pending ping or pong send operation
<li> <a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang"><code>IllegalArgumentException</code></a> -
         if the message is too long
<li> <a href="../../../../java.base/java/io/IOException.html" title="class in java.io"><code>IOException</code></a> -
         if an I/O error occurs, or if the output is closed
</ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>message</code> - the message</dd>
<dt>Returns:</dt>
<dd>a <code>CompletableFuture</code> that completes, with this WebSocket,
when the Ping message has been sent</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="sendPong(java.nio.ByteBuffer)">
<h3>sendPong</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</span>&nbsp;<span class="element-name">sendPong</span><wbr><span class="parameters">(<a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</span></div>
<div class="block">Sends a Pong message with bytes from the given buffer.

<p> The message consists of not more than <code>125</code> bytes from the
buffer's position to its limit. Upon normal completion of a
<code>CompletableFuture</code> returned from this method the buffer will have
no remaining bytes. The buffer must not be accessed until after that.

<p> Given that the WebSocket implementation will automatically send a
reciprocal pong when a ping is received, it is rarely required to send a
pong message explicitly.

<p> The <code>CompletableFuture</code> returned from this method can
complete exceptionally with:
<ul>
<li> <a href="../../../../java.base/java/lang/IllegalStateException.html" title="class in java.lang"><code>IllegalStateException</code></a> -
         if there is a pending ping or pong send operation
<li> <a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang"><code>IllegalArgumentException</code></a> -
         if the message is too long
<li> <a href="../../../../java.base/java/io/IOException.html" title="class in java.io"><code>IOException</code></a> -
         if an I/O error occurs, or if the output is closed
</ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>message</code> - the message</dd>
<dt>Returns:</dt>
<dd>a <code>CompletableFuture</code> that completes, with this WebSocket,
when the Pong message has been sent</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="sendClose(int,java.lang.String)">
<h3>sendClose</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&gt;</span>&nbsp;<span class="element-name">sendClose</span><wbr><span class="parameters">(int&nbsp;statusCode,
 <a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;reason)</span></div>
<div class="block">Initiates an orderly closure of this WebSocket's output by
sending a Close message with the given status code and the reason.

<p> The <code>statusCode</code> is an integer from the range
<code>1000 &lt;= code &lt;= 4999</code>. Status codes <code>1002</code>, <code>1003</code>,
<code>1006</code>, <code>1007</code>, <code>1009</code>, <code>1010</code>, <code>1012</code>,
<code>1013</code> and <code>1015</code> are illegal. Behaviour in respect to other
status codes is implementation-specific. A legal <code>reason</code> is a
string that has a UTF-8 representation not longer than <code>123</code> bytes.

<p> A <code>CompletableFuture</code> returned from this method can
complete exceptionally with:
<ul>
<li> <a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang"><code>IllegalArgumentException</code></a> -
          if <code>statusCode</code> is illegal, or
          if <code>reason</code> is illegal
<li> <a href="../../../../java.base/java/io/IOException.html" title="class in java.io"><code>IOException</code></a> -
          if an I/O error occurs, or if the output is closed
</ul>

<p> Unless the <code>CompletableFuture</code> returned from this method
completes with <code>IllegalArgumentException</code>, or the method throws
<code>NullPointerException</code>, the output will be closed.

<p> If not already closed, the input remains open until a Close message
<a href="WebSocket.Listener.html#onClose(java.net.http.WebSocket,int,java.lang.String)">received</a>, or
<code>abort</code> is invoked, or an
<a href="WebSocket.Listener.html#onError(java.net.http.WebSocket,java.lang.Throwable)">error</a> occurs.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>Use the provided integer constant <a href="#NORMAL_CLOSURE"><code>NORMAL_CLOSURE</code></a> as a
status code and an empty string as a reason in a typical case:
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-sendClose(int,java.lang.String)1"><code class="language-java">     CompletableFuture&lt;WebSocket&gt; webSocket = ...
     webSocket.thenCompose(ws -&gt; ws.sendText("Hello, ", false))
            .thenCompose(ws -&gt; ws.sendText("world!", true))
            .thenCompose(ws -&gt; ws.sendClose(WebSocket.NORMAL_CLOSURE, ""))
            .join();
</code></pre>
</div>


The <code>sendClose</code> method does not close this WebSocket's input. It
merely closes this WebSocket's output by sending a Close message. To
enforce closing the input, invoke the <code>abort</code> method. Here is an
example of an application that sends a Close message, and then starts a
timer. Once no data has been received within the specified timeout, the
timer goes off and the alarm aborts <code>WebSocket</code>:
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-sendClose(int,java.lang.String)2"><code class="language-java">MyAlarm alarm = new MyAlarm(webSocket::abort);
WebSocket.Listener listener = new WebSocket.Listener() {

    public CompletionStage&lt;?&gt; onText(WebSocket webSocket,
                                     CharSequence data,
                                     boolean last) {
        alarm.snooze();
        ...
    }
    ...
};
...
Runnable startTimer = () -&gt; {
    MyTimer idleTimer = new MyTimer();
    idleTimer.add(alarm, 30, TimeUnit.SECONDS);
};
webSocket.sendClose(WebSocket.NORMAL_CLOSURE, "ok").thenRun(startTimer);</code></pre>
</div>
</dd>
<dt>Parameters:</dt>
<dd><code>statusCode</code> - the status code</dd>
<dd><code>reason</code> - the reason</dd>
<dt>Returns:</dt>
<dd>a <code>CompletableFuture</code> that completes, with this WebSocket,
when the Close message has been sent</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="request(long)">
<h3>request</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">request</span><wbr><span class="parameters">(long&nbsp;n)</span></div>
<div class="block">Increments the counter of invocations of receive methods.

<p> This WebSocket will invoke <code>onText</code>, <code>onBinary</code>,
<code>onPing</code>, <code>onPong</code> or <code>onClose</code> methods on the
associated listener (i.e. receive methods) up to <code>n</code> more times.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>The parameter of this method is the number of invocations being
requested from this WebSocket to the associated listener, not the number
of messages. Sometimes a message may be delivered to the listener in a
single invocation, but not always. For example, Ping, Pong and Close
messages are delivered in a single invocation of <code>onPing</code>,
<code>onPong</code> and <code>onClose</code> methods respectively. However, whether
or not Text and Binary messages are delivered in a single invocation of
<code>onText</code> and <code>onBinary</code> methods depends on the boolean
argument (<code>last</code>) of these methods. If <code>last</code> is
<code>false</code>, then there is more to a message than has been delivered to
the invocation.

<p> Here is an example of a listener that requests invocations, one at a
time, until a complete message has been accumulated, and then processes
the result:
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-request(long)1"><code class="language-java">    WebSocket.Listener listener = new WebSocket.Listener() {

    StringBuilder text = new StringBuilder();

    public CompletionStage&lt;?&gt; onText(WebSocket webSocket,
                                     CharSequence message,
                                     boolean last) {
        text.append(message);
        if (last) {
            processCompleteTextMessage(text);
            text = new StringBuilder();
        }
        webSocket.request(1);
        return null;
    }
};</code></pre>
</div>
</dd>
<dt>Parameters:</dt>
<dd><code>n</code> - the number of invocations</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../java.base/java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>n &lt;= 0</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSubprotocol()">
<h3>getSubprotocol</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a></span>&nbsp;<span class="element-name">getSubprotocol</span>()</div>
<div class="block">Returns the subprotocol used by this WebSocket.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the subprotocol, or an empty string if there's no subprotocol</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isOutputClosed()">
<h3>isOutputClosed</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isOutputClosed</span>()</div>
<div class="block">Tells whether this WebSocket's output is closed.

<p> If this method returns <code>true</code>, subsequent invocations will also
return <code>true</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if closed, <code>false</code> otherwise</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isInputClosed()">
<h3>isInputClosed</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isInputClosed</span>()</div>
<div class="block">Tells whether this WebSocket's input is closed.

<p> If this method returns <code>true</code>, subsequent invocations will also
return <code>true</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if closed, <code>false</code> otherwise</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="abort()">
<h3>abort</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">abort</span>()</div>
<div class="block">Closes this WebSocket's input and output abruptly.

<p> When this method returns both the input and the output will have been
closed. Any pending send operations will fail with <code>IOException</code>.
Subsequent invocations of <code>abort</code> will have no effect.</div>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase25&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2025, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java25speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 25.0.1+8-LTS-27 --></small></p>
</footer>
</main>
</div>
</body>
</html>
