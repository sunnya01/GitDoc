<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>StableValue (Java SE 25 &amp; JDK 25)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: module: java.base, package: java.lang, interface: StableValue">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="java.lang.StableValue interface">
<meta name="keywords" content="trySet()">
<meta name="keywords" content="orElse()">
<meta name="keywords" content="orElseThrow()">
<meta name="keywords" content="isSet()">
<meta name="keywords" content="orElseSet()">
<meta name="keywords" content="setOrThrow()">
<meta name="keywords" content="equals()">
<meta name="keywords" content="hashCode()">
<meta name="keywords" content="of()">
<meta name="keywords" content="supplier()">
<meta name="keywords" content="intFunction()">
<meta name="keywords" content="function()">
<meta name="keywords" content="list()">
<meta name="keywords" content="map()">
<link rel="stylesheet" type="text/css" href="../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/StableValue.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../preview-list.html">Preview</a></li>
<li><a href="../../../new-list.html">New</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../search.html">Search</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><div><strong>Java SE 25 &amp; JDK 25</strong> </div></div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../module-summary.html">java.base</a></li>
<li><a href="package-summary.html">java.lang</a></li>
<li><a href="StableValue.html" class="current-selection">StableValue</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a>
<ol class="toc-list">
<li><a href="#stable-functions" tabindex="0">Stable Functions</a></li>
<li><a href="#stable-collections" tabindex="0">Stable Collections</a></li>
<li><a href="#composition" tabindex="0">Composing stable values</a></li>
<li><a href="#thread-safety" tabindex="0">Thread Safety</a></li>
<li><a href="#performance" tabindex="0">Performance</a></li>
</ol>
</li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#trySet(T)" tabindex="0">trySet(T)</a></li>
<li><a href="#orElse(T)" tabindex="0">orElse(T)</a></li>
<li><a href="#orElseThrow()" tabindex="0">orElseThrow()</a></li>
<li><a href="#isSet()" tabindex="0">isSet()</a></li>
<li><a href="#orElseSet(java.util.function.Supplier)" tabindex="0">orElseSet(Supplier)</a></li>
<li><a href="#setOrThrow(T)" tabindex="0">setOrThrow(T)</a></li>
<li><a href="#equals(java.lang.Object)" tabindex="0">equals(Object)</a></li>
<li><a href="#hashCode()" tabindex="0">hashCode()</a></li>
<li><a href="#of()" tabindex="0">of()</a></li>
<li><a href="#of(T)" tabindex="0">of(T)</a></li>
<li><a href="#supplier(java.util.function.Supplier)" tabindex="0">supplier(Supplier)</a></li>
<li><a href="#intFunction(int,java.util.function.IntFunction)" tabindex="0">intFunction(int, IntFunction)</a></li>
<li><a href="#function(java.util.Set,java.util.function.Function)" tabindex="0">function(Set, Function)</a></li>
<li><a href="#list(int,java.util.function.IntFunction)" tabindex="0">list(int, IntFunction)</a></li>
<li><a href="#map(java.util.Set,java.util.function.Function)" tabindex="0">map(Set, Function)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Interface StableValue" class="title">Interface StableValue&lt;T&gt;</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="type-param-T"><code>T</code> - type of the contents</span></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public sealed interface </span><span class="element-name type-name-label">StableValue&lt;T&gt;</span></div>
<div class="preview-block" id="preview-java.lang.StableValue"><span class="preview-label"><code>StableValue</code> is a preview API of the Java platform.</span>
<div class="preview-comment">Programs can only use <code>StableValue</code> when preview features are enabled.</div>
<div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div>
</div>
<div class="block">A stable value is a holder of contents that can be set at most once.
 <p>
 A <code>StableValue&lt;T&gt;</code> is typically created using the factory method
 <a href="#of()"><code>StableValue.of()</code></a>. When created this way,
 the stable value is <em>unset</em>, which means it holds no <em>contents</em>.
 Its contents, of type <code>T</code>, can be <em>set</em> by calling
 <a href="#trySet(T)">trySet()</a>, <a href="#setOrThrow(T)">setOrThrow()</a>,
 or <a href="#orElseSet(java.util.function.Supplier)">orElseSet()</a>. Once set, the contents
 can never change and can be retrieved by calling <a href="#orElseThrow()">orElseThrow()</a>
 , <a href="#orElse(T)">orElse()</a>, or <a href="#orElseSet(java.util.function.Supplier)">orElseSet()</a>.
 <p>
 Consider the following example where a stable value field "<code>logger</code>" is a
 shallowly immutable holder of contents of type <code>Logger</code> and that is initially
 created as <em>unset</em>, which means it holds no contents. Later in the example, the
 state of the "<code>logger</code>" field is checked and if it is still <em>unset</em>,
 the contents is <em>set</em>:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue1"><code class="language-java"> public class Component {

    // Creates a new unset stable value with no contents
    private final StableValue&lt;Logger&gt; logger = StableValue.<a href="#of()"><code>of</code></a>();

    private Logger getLogger() {
        if (!logger.isSet()) {
            logger.trySet(Logger.create(Component.class));
        }
        return logger.orElseThrow();
    }

    public void process() {
        getLogger().info("Process started");
        // ...
    }
 }
</code></pre>
</div>

 <p>
 If <code>getLogger()</code> is called from several threads, several instances of
 <code>Logger</code> might be created. However, the contents can only be set at most once
 meaning the first writer wins.
 <p>
 In order to guarantee that, even under races, only one instance of <code>Logger</code> is
 ever created, the <a href="#orElseSet(java.util.function.Supplier)">orElseSet()</a> method can be used
 instead, where the contents are lazily computed, and atomically set, via a
 <a href="../util/function/Supplier.html" title="interface in java.util.function">supplier</a>. In the example below, the supplier is provided in the
 form of a lambda expression:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue2"><code class="language-java"> public class Component {

    // Creates a new unset stable value with no contents
    private final StableValue&lt;Logger&gt; logger = StableValue.<a href="#of()"><code>of</code></a>();

    private Logger getLogger() {
        return logger.orElseSet( () -&gt; Logger.create(Component.class) );
    }

    public void process() {
        getLogger().info("Process started");
        // ...
    }
 }
</code></pre>
</div>

 <p>
 The <code>getLogger()</code> method calls <code>logger.orElseSet()</code> on the stable value to
 retrieve its contents. If the stable value is <em>unset</em>, then <code>orElseSet()</code>
 evaluates the given supplier, and sets the contents to the result; the result is then
 returned to the client. In other words, <code>orElseSet()</code> guarantees that a
 stable value's contents is <em>set</em> before it returns.
 <p>
 Furthermore, <code>orElseSet()</code> guarantees that out of one or more suppliers provided,
 only at most one is ever evaluated, and that one is only ever evaluated once,
 even when <code>logger.orElseSet()</code> is invoked concurrently. This property is crucial
 as evaluation of the supplier may have side effects, for example, the call above to
 <code>Logger.create()</code> may result in storage resources being prepared.

 <h2 id="stable-functions">Stable Functions</h2>
 Stable values provide the foundation for higher-level functional abstractions. A
 <em>stable supplier</em> is a supplier that computes a value and then caches it into
 a backing stable value storage for subsequent use. A stable supplier is created via the
 <a href="#supplier(java.util.function.Supplier)">StableValue.supplier()</a> factory, by
 providing an underlying <a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a> which is invoked when the stable supplier
 is first accessed:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue3"><code class="language-java"> public class Component {

     private final Supplier&lt;Logger&gt; logger =
             StableValue.<a href="#supplier(java.util.function.Supplier)"><code>supplier</code></a>( () -&gt; Logger.getLogger(Component.class) );

     public void process() {
        logger.get().info("Process started");
        // ...
     }
 }
</code></pre>
</div>

 A stable supplier encapsulates access to its backing stable value storage. This means
 that code inside <code>Component</code> can obtain the logger object directly from the
 stable supplier, without having to go through an accessor method like <code>getLogger()</code>.
 <p>
 A <em>stable int function</em> is a function that takes an <code>int</code> parameter and
 uses it to compute a result that is then cached by the backing stable value storage
 for that parameter value. A stable <a href="../util/function/IntFunction.html" title="interface in java.util.function"><code>IntFunction</code></a> is created via the
 <a href="#intFunction(int,java.util.function.IntFunction)">StableValue.intFunction()</a>
 factory. Upon creation, the input range (i.e. <code>[0, size)</code>) is specified together
 with an underlying <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a> which is invoked at most once per input
 value. In effect, the stable int function will act like a cache for the underlying
 <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue4"><code class="language-java"> final class PowerOf2Util {

     private PowerOf2Util() {}

     private static final int SIZE = 6;
     private static final IntFunction&lt;Integer&gt; UNDERLYING_POWER_OF_TWO =
         v -&gt; 1 &lt;&lt; v;

     private static final IntFunction&lt;Integer&gt; POWER_OF_TWO =
         StableValue.<a href="#intFunction(int,java.util.function.IntFunction)"><code>intFunction</code></a>(SIZE, UNDERLYING_POWER_OF_TWO);

     public static int powerOfTwo(int a) {
         return POWER_OF_TWO.apply(a);
     }
 }

 int result = PowerOf2Util.powerOfTwo(4);   // May eventually constant fold to 16 at runtime

</code></pre>
</div>

 The <code>PowerOf2Util.powerOfTwo()</code> function is a <em>partial function</em> that only
 allows a subset <code>[0, 5]</code> of the underlying function's <code>UNDERLYING_POWER_OF_TWO</code>
 input range.

 <p>
 A <em>stable function</em> is a function that takes a parameter (of type <code>T</code>) and
 uses it to compute a result (of type <code>R</code>) that is then cached by the backing
 stable value storage for that parameter value. A stable function is created via the
 <a href="#function(java.util.Set,java.util.function.Function)">StableValue.function()</a> factory.
 Upon creation, the input <a href="../util/Set.html" title="interface in java.util">Set</a> is specified together with an underlying
 <a href="../util/function/Function.html" title="interface in java.util.function">Function</a> which is invoked at most once per input value. In effect, the
 stable function will act like a cache for the underlying <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue5"><code class="language-java"> class Log2Util {

     private Log2Util() {}

     private static final Set&lt;Integer&gt; KEYS =
         Set.of(1, 2, 4, 8, 16, 32);
     private static final UnaryOperator&lt;Integer&gt; UNDERLYING_LOG2 =
         i -&gt; 31 - Integer.numberOfLeadingZeros(i);

     private static final Function&lt;Integer, Integer&gt; LOG2 =
         StableValue.<a href="#function(java.util.Set,java.util.function.Function)"><code>function</code></a>(KEYS, UNDERLYING_LOG2);

     public static int log2(int a) {
         return LOG2.apply(a);
     }

 }

 int result = Log2Util.log2(16);   // May eventually constant fold to 4 at runtime
</code></pre>
</div>


 The <code>Log2Util.log2()</code> function is a <em>partial function</em> that only allows
 a subset <code>{1, 2, 4, 8, 16, 32}</code> of the underlying function's
 <code>UNDERLYING_LOG2</code> input range.

 <h2 id="stable-collections">Stable Collections</h2>
 Stable values can also be used as backing storage for
 <a href="../util/Collection.html#unmodifiable">unmodifiable collections</a>. A <em>stable list</em>
 is an unmodifiable list, backed by an array of stable values. The stable list elements
 are computed when they are first accessed, using a provided <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue6"><code class="language-java">final class PowerOf2Util {

    private PowerOf2Util() {}

    private static final int SIZE = 6;
    private static final IntFunction&lt;Integer&gt; UNDERLYING_POWER_OF_TWO =
            v -&gt; 1 &lt;&lt; v;

    private static final List&lt;Integer&gt; POWER_OF_TWO =
        StableValue.<a href="#list(int,java.util.function.IntFunction)"><code>list</code></a>(SIZE, UNDERLYING_POWER_OF_TWO);

    public static int powerOfTwo(int a) {
        return POWER_OF_TWO.get(a);
    }
}

int result = PowerOf2Util.powerOfTwo(4);   // May eventually constant fold to 16 at runtime

</code></pre>
</div>

 <p>
 Similarly, a <em>stable map</em> is an unmodifiable map whose keys are known at
 construction. The stable map values are computed when they are first accessed,
 using a provided <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue7"><code class="language-java"> class Log2Util {

     private Log2Util() {}

     private static final Set&lt;Integer&gt; KEYS =
         Set.of(1, 2, 4, 8, 16, 32);
     private static final UnaryOperator&lt;Integer&gt; UNDERLYING_LOG2 =
         i -&gt; 31 - Integer.numberOfLeadingZeros(i);

     private static final Map&lt;Integer, INTEGER&gt; LOG2 =
         StableValue.<a href="#map(java.util.Set,java.util.function.Function)"><code>map</code></a>(CACHED_KEYS, UNDERLYING_LOG2);

     public static int log2(int a) {
          return LOG2.get(a);
     }

 }

 int result = Log2Util.log2(16);   // May eventually constant fold to 4 at runtime

</code></pre>
</div>


 <h2 id="composition">Composing stable values</h2>
 A stable value can depend on other stable values, forming a dependency graph
 that can be lazily computed but where access to individual elements can still be
 performant. In the following example, a single <code>Foo</code> and a <code>Bar</code>
 instance (that is dependent on the <code>Foo</code> instance) are lazily created, both of
 which are held by stable values:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue8"><code class="language-java"> public final class DependencyUtil {

     private DependencyUtil() {}

     public static class Foo {
          // ...
      }

     public static class Bar {
         public Bar(Foo foo) {
              // ...
         }
     }

     private static final Supplier&lt;Foo&gt; FOO = StableValue.supplier(Foo::new);
     private static final Supplier&lt;Bar&gt; BAR = StableValue.supplier(() -&gt; new Bar(FOO.get()));

     public static Foo foo() {
         return FOO.get();
     }

     public static Bar bar() {
         return BAR.get();
     }

 }
</code></pre>
</div>

 Calling <code>bar()</code> will create the <code>Bar</code> singleton if it is not already
 created. Upon such a creation, the dependent <code>Foo</code> will first be created if
 the <code>Foo</code> does not already exist.
 <p>
 Another example, which has a more complex dependency graph, is to compute the
 Fibonacci sequence lazily:
 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue9"><code class="language-java"> public final class Fibonacci {

     private Fibonacci() {}

     private static final int MAX_SIZE_INT = 46;

     private static final IntFunction&lt;Integer&gt; FIB =
         StableValue.intFunction(MAX_SIZE_INT, Fibonacci::fib);

     public static int fib(int n) {
         return n &lt; 2
                 ? n
                 : FIB.apply(n - 1) + FIB.apply(n - 2);
     }

 }
</code></pre>
</div>

 Both <code>FIB</code> and <code>Fibonacci::fib</code> recurse into each other. Because the
 stable int function <code>FIB</code> caches intermediate results, the initial
 computational complexity is reduced from exponential to linear compared to a
 traditional non-caching recursive fibonacci method. Once computed, the VM is free to
 constant-fold expressions like <code>Fibonacci.fib(5)</code>.
 <p>
 The fibonacci example above is a directed acyclic graph (i.e.,
 it has no circular dependencies and is therefore a dependency tree):
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-java.lang.StableValue10"><code class="language-text">
              ___________fib(5)____________
             /                             \
       ____fib(4)____                  ____fib(3)____
      /              \                /              \
    fib(3)          fib(2)          fib(2)          fib(1)
   /     \         /     \         /     \
 fib(2) fib(1)   fib(1) fib(0)   fib(1) fib(0)
</code></pre>
</div>


 If there are circular dependencies in a dependency graph, a stable value will
 eventually throw an <a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a> upon referencing elements in
 a circularity.

 <h2 id="thread-safety">Thread Safety</h2>
 The contents of a stable value is guaranteed to be set at most once. If competing
 threads are racing to set a stable value, only one update succeeds, while the other
 updates are blocked until the stable value is set, whereafter the other updates
 observes the stable value is set and leave the stable value unchanged.
 <p>
 The at-most-once write operation on a stable value that succeeds
 (e.g. <a href="#trySet(T)">trySet()</a>)
 <a href="../util/concurrent/package-summary.html#MemoryVisibility"><em>happens-before</em></a>
 any successful read operation (e.g. <a href="#orElseThrow()">orElseThrow()</a>).
 A successful write operation can be either:
 <ul>
     <li>a <a href="#trySet(T)"><code>trySet(Object)</code></a> that returns <code>true</code>,</li>
     <li>a <a href="#setOrThrow(T)"><code>setOrThrow(Object)</code></a> that does not throw, or</li>
     <li>an <a href="#orElseSet(java.util.function.Supplier)"><code>orElseSet(Supplier)</code></a> that successfully runs the supplier</li>
 </ul>
 A successful read operation can be either:
 <ul>
     <li>a <a href="#orElseThrow()"><code>orElseThrow()</code></a> that does not throw,</li>
     <li>a <a href="#orElse(T)"><code>orElse(other)</code></a> that does not return the <code>other</code> value</li>
     <li>an <a href="#orElseSet(java.util.function.Supplier)"><code>orElseSet(Supplier)</code></a> that does not <code>throw</code>, or</li>
     <li>an <a href="#isSet()"><code>isSet()</code></a> that returns <code>true</code></li>
 </ul>
 <p>
 The method <a href="#orElseSet(java.util.function.Supplier)"><code>orElseSet(Supplier)</code></a> guarantees that the provided
 <a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a> is invoked successfully at most once, even under race.
 Invocations of <a href="#orElseSet(java.util.function.Supplier)"><code>orElseSet(Supplier)</code></a> form a total order of zero or
 more exceptional invocations followed by zero (if the contents were already set) or one
 successful invocation. Since stable functions and stable collections are built on top
 of the same principles as <a href="#orElseSet(java.util.function.Supplier)">orElseSet()</a> they
 too are thread safe and guarantee at-most-once-per-input invocation.

 <h2 id="performance">Performance</h2>
 As the contents of a stable value can never change after it has been set, a JVM
 implementation may, for a set stable value, elide all future reads of that
 stable value, and instead directly use any contents that it has previously observed.
 This is true if the reference to the stable value is a constant (e.g. in cases where
 the stable value itself is stored in a <code>static final</code> field). Stable functions
 and collections are built on top of StableValue. As such, they might also be eligible
 for the same JVM optimizations as for StableValue.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>Implementing classes of <code>StableValue</code> are free to synchronize on
           <code>this</code> and consequently, it should be avoided to
           (directly or indirectly) synchronize on a <code>StableValue</code>. Hence,
           synchronizing on <code>this</code> may lead to deadlock.
           <p>
           Except for a <code>StableValue</code>'s contents itself,
           an <a href="#orElse(T)">orElse(other)</a> parameter, and
           an <a href="#equals(java.lang.Object)">equals(obj)</a> parameter; all
           method parameters must be <em>non-null</em> or a <a href="NullPointerException.html" title="class in java.lang"><code>NullPointerException</code></a>
           will be thrown.</dd>
<dt>Implementation Note:</dt>
<dd>A <code>StableValue</code> is mainly intended to be a non-public field in
           a class and is usually neither exposed directly via accessors nor passed as
           a method parameter.
           <p>
           Stable functions and collections make reasonable efforts to provide
           <a href="Object.html#toString()"><code>Object.toString()</code></a> operations that do not trigger evaluation
           of the internal stable values when called.
           Stable collections have <a href="Object.html#equals(java.lang.Object)"><code>Object.equals(Object)</code></a> operations that try
           to minimize evaluation of the internal stable values when called.
           <p>
           As objects can be set via stable values but never removed, this can be a
           source of unintended memory leaks. A stable value's contents are
           <a href="ref/package-summary.html#reachability">strongly reachable</a>.
           Be advised that reachable stable values will hold their set contents until
           the stable value itself is collected.
           <p>
           A <code>StableValue</code> that has a type parameter <code>T</code> that is an array
           type (of arbitrary rank) will only allow the JVM to treat the
           <em>array reference</em> as a stable value but <em>not its components</em>.
           Instead, a <a href="#list(int,java.util.function.IntFunction)">a stable list</a> of arbitrary
           depth can be used, which provides stable components. More generally, a
           stable value can hold other stable values of arbitrary depth and still
           provide transitive constantness.
           <p>
           Stable values, functions, and collections are not <a href="../io/Serializable.html" title="interface in java.io"><code>Serializable</code></a>.</dd>
<dt>Since:</dt>
<dd>25</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#equals(java.lang.Object)" class="member-name-link">equals</a><wbr>(<a href="Object.html" title="class in java.lang">Object</a>&nbsp;obj)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns <code>true</code> if <code>this == obj</code>, <code>false</code> otherwise.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static &lt;T,<wbr>R&gt;&nbsp;<a href="../util/function/Function.html" title="interface in java.util.function">Function</a><wbr>&lt;T,<wbr>R&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#function(java.util.Set,java.util.function.Function)" class="member-name-link">function</a><wbr>(<a href="../util/Set.html" title="interface in java.util">Set</a>&lt;? extends T&gt;&nbsp;inputs,
 <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>&lt;? super T, ? extends R&gt;&nbsp;underlying)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new stable <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#hashCode()" class="member-name-link">hashCode</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the <a href="System.html#identityHashCode(java.lang.Object)">identity hash code</a> of
         <code>this</code> object.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static &lt;R&gt;&nbsp;<a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a><wbr>&lt;R&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#intFunction(int,java.util.function.IntFunction)" class="member-name-link">intFunction</a><wbr>(int&nbsp;size,
 <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>&lt;? extends R&gt;&nbsp;underlying)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new stable <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isSet()" class="member-name-link">isSet</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns <code>true</code> if the contents is set, <code>false</code> otherwise.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static &lt;E&gt;&nbsp;<a href="../util/List.html" title="interface in java.util">List</a><wbr>&lt;E&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#list(int,java.util.function.IntFunction)" class="member-name-link">list</a><wbr>(int&nbsp;size,
 <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>&lt;? extends E&gt;&nbsp;mapper)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new stable list with the provided <code>size</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static &lt;K,<wbr>V&gt;&nbsp;<a href="../util/Map.html" title="interface in java.util">Map</a><wbr>&lt;K,<wbr>V&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#map(java.util.Set,java.util.function.Function)" class="member-name-link">map</a><wbr>(<a href="../util/Set.html" title="interface in java.util">Set</a>&lt;K&gt;&nbsp;keys,
 <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>&lt;? super K, ? extends V&gt;&nbsp;mapper)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new stable map with the provided <code>keys</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static &lt;T&gt;&nbsp;<a href="StableValue.html" title="interface in java.lang">StableValue</a><sup class="preview-mark"><a href="#preview-java.lang.StableValue">PREVIEW</a></sup><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#of()" class="member-name-link">of</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new unset stable value.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static &lt;T&gt;&nbsp;<a href="StableValue.html" title="interface in java.lang">StableValue</a><sup class="preview-mark"><a href="#preview-java.lang.StableValue">PREVIEW</a></sup><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#of(T)" class="member-name-link">of</a><wbr>(T&nbsp;contents)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new pre-set stable value with the provided <code>contents</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#type-param-T" title="type parameter in StableValue">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#orElse(T)" class="member-name-link">orElse</a><wbr>(<a href="#type-param-T" title="type parameter in StableValue">T</a>&nbsp;other)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the contents if set, otherwise, returns the provided <code>other</code> value.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#type-param-T" title="type parameter in StableValue">T</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#orElseSet(java.util.function.Supplier)" class="member-name-link">orElseSet</a><wbr>(<a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends <a href="#type-param-T" title="type parameter in StableValue">T</a>&gt;&nbsp;supplier)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the contents; if unset, first attempts to compute and set the
         contents using the provided <code>supplier</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#type-param-T" title="type parameter in StableValue">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#orElseThrow()" class="member-name-link">orElseThrow</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the contents if set, otherwise, throws <code>NoSuchElementException</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setOrThrow(T)" class="member-name-link">setOrThrow</a><wbr>(<a href="#type-param-T" title="type parameter in StableValue">T</a>&nbsp;contents)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Sets the contents of this StableValue to the provided <code>contents</code>, or, if
already set, throws <code>IllegalStateException</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static &lt;T&gt;&nbsp;<a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#supplier(java.util.function.Supplier)" class="member-name-link">supplier</a><wbr>(<a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends T&gt;&nbsp;underlying)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Returns a new stable supplier.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#trySet(T)" class="member-name-link">trySet</a><wbr>(<a href="#type-param-T" title="type parameter in StableValue">T</a>&nbsp;contents)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Tries to set the contents of this StableValue to the provided <code>contents</code>.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="trySet(T)">
<h3 id="trySet(java.lang.Object)">trySet</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">trySet</span><wbr><span class="parameters">(<a href="#type-param-T" title="type parameter in StableValue">T</a>&nbsp;contents)</span></div>
<div class="block">Tries to set the contents of this StableValue to the provided <code>contents</code>.
The contents of this StableValue can only be set once, implying this method only
returns <code>true</code> once.
<p>
When this method returns, the contents of this StableValue is always set.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>contents</code> - to set</dd>
<dt>Returns:</dt>
<dd><code>true</code> if the contents of this StableValue was set to the
        provided <code>contents</code>, <code>false</code> otherwise</dd>
<dt>Throws:</dt>
<dd><code><a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if a supplier invoked by <a href="#orElseSet(java.util.function.Supplier)"><code>orElseSet(Supplier)</code></a>
        recursively attempts to set this stable value by calling this method
        directly or indirectly.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="orElse(T)">
<h3 id="orElse(java.lang.Object)">orElse</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="#type-param-T" title="type parameter in StableValue">T</a></span>&nbsp;<span class="element-name">orElse</span><wbr><span class="parameters">(<a href="#type-param-T" title="type parameter in StableValue">T</a>&nbsp;other)</span></div>
<div class="block">Returns the contents if set, otherwise, returns the provided <code>other</code> value.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>other</code> - to return if the contents is not set</dd>
<dt>Returns:</dt>
<dd>the contents if set, otherwise, returns the provided <code>other</code> value</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="orElseThrow()">
<h3>orElseThrow</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="#type-param-T" title="type parameter in StableValue">T</a></span>&nbsp;<span class="element-name">orElseThrow</span>()</div>
<div class="block">Returns the contents if set, otherwise, throws <code>NoSuchElementException</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the contents if set, otherwise, throws <code>NoSuchElementException</code></dd>
<dt>Throws:</dt>
<dd><code><a href="../util/NoSuchElementException.html" title="class in java.util">NoSuchElementException</a></code> - if no contents is set</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isSet()">
<h3>isSet</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isSet</span>()</div>
<div class="block">Returns <code>true</code> if the contents is set, <code>false</code> otherwise.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the contents is set, <code>false</code> otherwise</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="orElseSet(java.util.function.Supplier)">
<h3>orElseSet</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="#type-param-T" title="type parameter in StableValue">T</a></span>&nbsp;<span class="element-name">orElseSet</span><wbr><span class="parameters">(<a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends <a href="#type-param-T" title="type parameter in StableValue">T</a>&gt;&nbsp;supplier)</span></div>
<div class="block">Returns the contents; if unset, first attempts to compute and set the
         contents using the provided <code>supplier</code>.
<p>
The provided <code>supplier</code> is guaranteed to be invoked at most once if it
completes without throwing an exception. If this method is invoked several times
with different suppliers, only one of them will be invoked provided it completes
without throwing an exception.
<p>
If the supplier throws an (unchecked) exception, the exception is rethrown and no
contents is set. The most common usage is to construct a new object serving
as a lazily computed value or memoized result, as in:

<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-orElseSet(java.util.function.Supplier)1"><code class="language-java">Value v = stable.orElseSet(Value::new);
</code></pre>
</div>

<p>
When this method returns successfully, the contents is always set.
<p>
The provided <code>supplier</code> will only be invoked once even if invoked from
several threads unless the <code>supplier</code> throws an exception.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>supplier</code> - to be used for computing the contents, if not previously set</dd>
<dt>Returns:</dt>
<dd>the contents; if unset, first attempts to compute and set the
         contents using the provided <code>supplier</code></dd>
<dt>Throws:</dt>
<dd><code><a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if the provided <code>supplier</code> recursively
                              attempts to set this stable value.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setOrThrow(T)">
<h3 id="setOrThrow(java.lang.Object)">setOrThrow</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setOrThrow</span><wbr><span class="parameters">(<a href="#type-param-T" title="type parameter in StableValue">T</a>&nbsp;contents)</span></div>
<div class="block">Sets the contents of this StableValue to the provided <code>contents</code>, or, if
already set, throws <code>IllegalStateException</code>.
<p>
When this method returns (or throws an exception), the contents is always set.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>contents</code> - to set</dd>
<dt>Throws:</dt>
<dd><code><a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if the contents was already set</dd>
<dd><code><a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if a supplier invoked by <a href="#orElseSet(java.util.function.Supplier)"><code>orElseSet(Supplier)</code></a>
        recursively attempts to set this stable value by calling this method
        directly or indirectly.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="equals(java.lang.Object)">
<h3>equals</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">equals</span><wbr><span class="parameters">(<a href="Object.html" title="class in java.lang">Object</a>&nbsp;obj)</span></div>
<div class="block">Returns <code>true</code> if <code>this == obj</code>, <code>false</code> otherwise.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="Object.html#equals(java.lang.Object)">equals</a></code>&nbsp;in class&nbsp;<code><a href="Object.html" title="class in java.lang">Object</a></code></dd>
<dt>Parameters:</dt>
<dd><code>obj</code> - to check for equality</dd>
<dt>Returns:</dt>
<dd><code>true</code> if <code>this == obj</code>, <code>false</code> otherwise</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Object.html#hashCode()"><code>Object.hashCode()</code></a></li>
<li><a href="../util/HashMap.html" title="class in java.util"><code>HashMap</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hashCode()">
<h3>hashCode</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">hashCode</span>()</div>
<div class="block">Returns the <a href="System.html#identityHashCode(java.lang.Object)">identity hash code</a> of
         <code>this</code> object.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="Object.html#hashCode()">hashCode</a></code>&nbsp;in class&nbsp;<code><a href="Object.html" title="class in java.lang">Object</a></code></dd>
<dt>Returns:</dt>
<dd>the <a href="System.html#identityHashCode(java.lang.Object)">identity hash code</a> of
         <code>this</code> object</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="Object.html#equals(java.lang.Object)"><code>Object.equals(java.lang.Object)</code></a></li>
<li><a href="System.html#identityHashCode(java.lang.Object)"><code>System.identityHashCode(Object)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="of()">
<h3>of</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="StableValue.html" title="interface in java.lang">StableValue</a><sup class="preview-mark"><a href="#preview-java.lang.StableValue">PREVIEW</a></sup>&lt;T&gt;</span>&nbsp;<span class="element-name">of</span>()</div>
<div class="block">Returns a new unset stable value.
<p>
An unset stable value has no contents.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="of()-type-param-T"><code>T</code> - type of the contents</span></dd>
<dt>Returns:</dt>
<dd>a new unset stable value</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="of(T)">
<h3 id="of(java.lang.Object)">of</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="StableValue.html" title="interface in java.lang">StableValue</a><sup class="preview-mark"><a href="#preview-java.lang.StableValue">PREVIEW</a></sup>&lt;T&gt;</span>&nbsp;<span class="element-name">of</span><wbr><span class="parameters">(T&nbsp;contents)</span></div>
<div class="block">Returns a new pre-set stable value with the provided <code>contents</code>.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="of(T)-type-param-T"><code>T</code> - type of the contents</span></dd>
<dt>Parameters:</dt>
<dd><code>contents</code> - to set</dd>
<dt>Returns:</dt>
<dd>a new pre-set stable value with the provided <code>contents</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="supplier(java.util.function.Supplier)">
<h3>supplier</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a>&lt;T&gt;</span>&nbsp;<span class="element-name">supplier</span><wbr><span class="parameters">(<a href="../util/function/Supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends T&gt;&nbsp;underlying)</span></div>
<div class="block">Returns a new stable supplier.
<p>
The returned <a href="../util/function/Supplier.html" title="interface in java.util.function">supplier</a> is a caching supplier that records
the value of the provided <code>underlying</code> supplier upon being first accessed via
the returned supplier's <a href="../util/function/Supplier.html#get()">get()</a> method.
<p>
The provided <code>underlying</code> supplier is guaranteed to be successfully invoked
at most once even in a multi-threaded environment. Competing threads invoking the
returned supplier's <a href="../util/function/Supplier.html#get()">get()</a> method when a value is
already under computation will block until a value is computed or an exception is
thrown by the computing thread. The competing threads will then observe the newly
computed value (if any) and will then never execute the <code>underlying</code> supplier.
<p>
If the provided <code>underlying</code> supplier throws an exception, it is rethrown
to the initial caller and no contents is recorded.
<p>
If the provided <code>underlying</code> supplier recursively calls the returned
supplier, an <a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a> will be thrown.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="supplier(java.util.function.Supplier)-type-param-T"><code>T</code> - the type of results supplied by the returned supplier</span></dd>
<dt>Parameters:</dt>
<dd><code>underlying</code> - supplier used to compute a cached value</dd>
<dt>Returns:</dt>
<dd>a new stable supplier</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="intFunction(int,java.util.function.IntFunction)">
<h3>intFunction</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;R&gt;</span>&nbsp;<span class="return-type"><a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>&lt;R&gt;</span>&nbsp;<span class="element-name">intFunction</span><wbr><span class="parameters">(int&nbsp;size,
 <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>&lt;? extends R&gt;&nbsp;underlying)</span></div>
<div class="block">Returns a new stable <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>.
<p>
The returned function is a caching function that, for each allowed <code>int</code>
input, records the values of the provided <code>underlying</code>
function upon being first accessed via the returned function's
<a href="../util/function/IntFunction.html#apply(int)">apply()</a> method. If the returned function is
invoked with an input that is not in the range <code>[0, size)</code>, an
<a href="IllegalArgumentException.html" title="class in java.lang"><code>IllegalArgumentException</code></a> will be thrown.
<p>
The provided <code>underlying</code> function is guaranteed to be successfully invoked
at most once per allowed input, even in a multi-threaded environment. Competing
threads invoking the returned function's
<a href="../util/function/IntFunction.html#apply(int)">apply()</a> method when a value is already under
computation will block until a value is computed or an exception is thrown by
the computing thread.
<p>
If invoking the provided <code>underlying</code> function throws an exception, it is
rethrown to the initial caller and no contents is recorded.
<p>
If the provided <code>underlying</code> function recursively calls the returned
function for the same input, an <a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a> will
be thrown.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="intFunction(int,java.util.function.IntFunction)-type-param-R"><code>R</code> - the type of results delivered by the returned IntFunction</span></dd>
<dt>Parameters:</dt>
<dd><code>size</code> - the upper bound of the range <code>[0, size)</code> indicating
                  the allowed inputs</dd>
<dd><code>underlying</code> - <code>IntFunction</code> used to compute cached values</dd>
<dt>Returns:</dt>
<dd>a new stable <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a></dd>
<dt>Throws:</dt>
<dd><code><a href="IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if the provided <code>size</code> is negative.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="function(java.util.Set,java.util.function.Function)">
<h3>function</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;T,<wbr>R&gt;</span>&nbsp;<span class="return-type"><a href="../util/function/Function.html" title="interface in java.util.function">Function</a>&lt;T,<wbr>R&gt;</span>&nbsp;<span class="element-name">function</span><wbr><span class="parameters">(<a href="../util/Set.html" title="interface in java.util">Set</a>&lt;? extends T&gt;&nbsp;inputs,
 <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>&lt;? super T, ? extends R&gt;&nbsp;underlying)</span></div>
<div class="block">Returns a new stable <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>.
<p>
The returned function is a caching function that, for each allowed
input in the given set of <code>inputs</code>, records the values of the provided
<code>underlying</code> function upon being first accessed via the returned function's
<a href="../util/function/Function.html#apply(T)">apply()</a> method. If the returned function is
invoked with an input that is not in <code>inputs</code>, an <a href="IllegalArgumentException.html" title="class in java.lang"><code>IllegalArgumentException</code></a>
will be thrown.
<p>
The provided <code>underlying</code> function is guaranteed to be successfully invoked
at most once per allowed input, even in a multi-threaded environment. Competing
threads invoking the returned function's <a href="../util/function/Function.html#apply(T)">apply()</a>
method when a value is already under computation will block until a value is
computed or an exception is thrown by the computing thread.
<p>
If invoking the provided <code>underlying</code> function throws an exception, it is
rethrown to the initial caller and no contents is recorded.
<p>
If the provided <code>underlying</code> function recursively calls the returned
function for the same input, an <a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a> will
be thrown.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="function(java.util.Set,java.util.function.Function)-type-param-T"><code>T</code> - the type of the input to the returned Function</span></dd>
<dd><span id="function(java.util.Set,java.util.function.Function)-type-param-R"><code>R</code> - the type of results delivered by the returned Function</span></dd>
<dt>Parameters:</dt>
<dd><code>inputs</code> - the set of (non-null) allowed input values</dd>
<dd><code>underlying</code> - <code>Function</code> used to compute cached values</dd>
<dt>Returns:</dt>
<dd>a new stable <a href="../util/function/Function.html" title="interface in java.util.function">Function</a></dd>
<dt>Throws:</dt>
<dd><code><a href="NullPointerException.html" title="class in java.lang">NullPointerException</a></code> - if the provided set of <code>inputs</code> contains a
                             <code>null</code> element.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="list(int,java.util.function.IntFunction)">
<h3>list</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;E&gt;</span>&nbsp;<span class="return-type"><a href="../util/List.html" title="interface in java.util">List</a>&lt;E&gt;</span>&nbsp;<span class="element-name">list</span><wbr><span class="parameters">(int&nbsp;size,
 <a href="../util/function/IntFunction.html" title="interface in java.util.function">IntFunction</a>&lt;? extends E&gt;&nbsp;mapper)</span></div>
<div class="block">Returns a new stable list with the provided <code>size</code>.
<p>
The returned list is an <a href="../util/Collection.html#unmodifiable">unmodifiable</a> list
with the provided <code>size</code>. The list's elements are computed via the
provided <code>mapper</code> when they are first accessed
(e.g. via <a href="../util/List.html#get(int)">List::get</a>).
<p>
The provided <code>mapper</code> function is guaranteed to be successfully invoked
at most once per list index, even in a multi-threaded environment. Competing
threads accessing an element already under computation will block until an element
is computed or an exception is thrown by the computing thread.
<p>
If invoking the provided <code>mapper</code> function throws an exception, it
is rethrown to the initial caller and no value for the element is recorded.
<p>
Any <a href="../util/List.html#subList(int,int)"><code>subList</code></a> or <a href="../util/List.html#reversed()"><code>List.reversed()</code></a> views
of the returned list are also stable.
<p>
The returned list and its <a href="../util/List.html#subList(int,int)"><code>subList</code></a> or
<a href="../util/List.html#reversed()"><code>List.reversed()</code></a> views implement the <a href="../util/RandomAccess.html" title="interface in java.util"><code>RandomAccess</code></a> interface.
<p>
The returned list is unmodifiable and does not implement the
<a href="../util/Collection.html#optional-operation">optional operations</a> in the
<a href="../util/List.html" title="interface in java.util">List</a> interface.
<p>
If the provided <code>mapper</code> recursively calls the returned list for the
same index, an <a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a> will be thrown.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="list(int,java.util.function.IntFunction)-type-param-E"><code>E</code> - the type of elements in the returned list</span></dd>
<dt>Parameters:</dt>
<dd><code>size</code> - the size of the returned list</dd>
<dd><code>mapper</code> - to invoke whenever an element is first accessed
              (may return <code>null</code>)</dd>
<dt>Returns:</dt>
<dd>a new stable list with the provided <code>size</code></dd>
<dt>Throws:</dt>
<dd><code><a href="IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if the provided <code>size</code> is negative.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="map(java.util.Set,java.util.function.Function)">
<h3>map</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="type-parameters">&lt;K,<wbr>V&gt;</span>&nbsp;<span class="return-type"><a href="../util/Map.html" title="interface in java.util">Map</a>&lt;K,<wbr>V&gt;</span>&nbsp;<span class="element-name">map</span><wbr><span class="parameters">(<a href="../util/Set.html" title="interface in java.util">Set</a>&lt;K&gt;&nbsp;keys,
 <a href="../util/function/Function.html" title="interface in java.util.function">Function</a>&lt;? super K, ? extends V&gt;&nbsp;mapper)</span></div>
<div class="block">Returns a new stable map with the provided <code>keys</code>.
<p>
The returned map is an <a href="../util/Collection.html#unmodifiable">unmodifiable</a> map whose
keys are known at construction. The map's values are computed via the provided
<code>mapper</code> when they are first accessed
(e.g. via <a href="../util/Map.html#get(java.lang.Object)">Map::get</a>).
<p>
The provided <code>mapper</code> function is guaranteed to be successfully invoked
at most once per key, even in a multi-threaded environment. Competing
threads accessing a value already under computation will block until an element
is computed or an exception is thrown by the computing thread.
<p>
If invoking the provided <code>mapper</code> function throws an exception, it
is rethrown to the initial caller and no value associated with the provided key
is recorded.
<p>
Any <a href="../util/Map.html#values()"><code>Map.values()</code></a> or <a href="../util/Map.html#entrySet()"><code>Map.entrySet()</code></a> views of the returned map are
also stable.
<p>
The returned map is unmodifiable and does not implement the
<a href="../util/Collection.html#optional-operations">optional operations</a> in the
<a href="../util/Map.html" title="interface in java.util">Map</a> interface.
<p>
If the provided <code>mapper</code> recursively calls the returned map for
the same key, an <a href="IllegalStateException.html" title="class in java.lang">IllegalStateException</a> will be thrown.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="map(java.util.Set,java.util.function.Function)-type-param-K"><code>K</code> - the type of keys maintained by the returned map</span></dd>
<dd><span id="map(java.util.Set,java.util.function.Function)-type-param-V"><code>V</code> - the type of mapped values in the returned map</span></dd>
<dt>Parameters:</dt>
<dd><code>keys</code> - the (non-null) keys in the returned map</dd>
<dd><code>mapper</code> - to invoke whenever an associated value is first accessed
              (may return <code>null</code>)</dd>
<dt>Returns:</dt>
<dd>a new stable map with the provided <code>keys</code></dd>
<dt>Throws:</dt>
<dd><code><a href="NullPointerException.html" title="class in java.lang">NullPointerException</a></code> - if the provided set of <code>inputs</code> contains a
                             <code>null</code> element.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase25&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2025, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java25speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 25.0.1+8-LTS-27 --></small></p>
</footer>
</main>
</div>
</body>
</html>
