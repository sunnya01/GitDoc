<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>WatchService (Java SE 25 &amp; JDK 25)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: module: java.base, package: java.nio.file, interface: WatchService">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="java.nio.file.WatchService interface">
<meta name="keywords" content="close()">
<meta name="keywords" content="poll()">
<meta name="keywords" content="take()">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/WatchService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><div><strong>Java SE 25 &amp; JDK 25</strong> </div></div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../../module-summary.html">java.base</a></li>
<li><a href="package-summary.html">java.nio.file</a></li>
<li><a href="WatchService.html" class="current-selection">WatchService</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a>
<ol class="toc-list">
<li><a href="#platform-dependencies-heading" tabindex="0">Platform dependencies</a></li>
</ol>
</li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#close()" tabindex="0">close()</a></li>
<li><a href="#poll()" tabindex="0">poll()</a></li>
<li><a href="#poll(long,java.util.concurrent.TimeUnit)" tabindex="0">poll(long, TimeUnit)</a></li>
<li><a href="#take()" tabindex="0">take()</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Interface WatchService" class="title">Interface WatchService</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="../../lang/AutoCloseable.html" title="interface in java.lang">AutoCloseable</a>, <a href="../../io/Closeable.html" title="interface in java.io">Closeable</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">WatchService</span><span class="extends-implements">
extends <a href="../../io/Closeable.html" title="interface in java.io">Closeable</a></span></div>
<div class="block">A watch service that <em>watches</em> registered objects for changes and
events. For example a file manager may use a watch service to monitor a
directory for changes so that it can update its display of the list of files
when files are created or deleted.

<p> A <a href="Watchable.html" title="interface in java.nio.file"><code>Watchable</code></a> object is registered with a watch service by invoking
its <a href="Watchable.html#register(java.nio.file.WatchService,java.nio.file.WatchEvent.Kind%5B%5D,java.nio.file.WatchEvent.Modifier...)"><code>register</code></a> method, returning a <a href="WatchKey.html" title="interface in java.nio.file"><code>WatchKey</code></a>
to represent the registration. When an event for an object is detected the
key is <em>signalled</em>, and if not currently signalled, it is queued to
the watch service so that it can be retrieved by consumers that invoke the
<a href="#poll()"><code>poll</code></a> or <a href="#take()"><code>take</code></a> methods to retrieve keys
and process events. Once the events have been processed the consumer
invokes the key's <a href="WatchKey.html#reset()"><code>reset</code></a> method to reset the key which
allows the key to be signalled and re-queued with further events.

<p> Registration with a watch service is cancelled by invoking the key's
<a href="WatchKey.html#cancel()"><code>cancel</code></a> method. A key that is queued at the time that
it is cancelled remains in the queue until it is retrieved. Depending on the
object, a key may be cancelled automatically. For example, suppose a
directory is watched and the watch service detects that it has been deleted
or its file system is no longer accessible. When a key is cancelled in this
manner it is signalled and queued, if not currently signalled. To ensure
that the consumer is notified the return value from the <code>reset</code>
method indicates if the key is valid.

<p> A watch service is safe for use by multiple concurrent consumers. To
ensure that only one consumer processes the events for a particular object at
any time then care should be taken to ensure that the key's <code>reset</code>
method is only invoked after its events have been processed. The <a href="#close()"><code>close</code></a> method may be invoked at any time to close the service causing
any threads waiting to retrieve keys, to throw <code>
ClosedWatchServiceException</code>.

<p> File systems may report events faster than they can be retrieved or
processed and an implementation may impose an unspecified limit on the number
of events that it may accumulate. Where an implementation <em>knowingly</em>
discards events then it arranges for the key's <a href="WatchKey.html#pollEvents()"><code>pollEvents</code></a> method to return an element with an event type of <a href="StandardWatchEventKinds.html#OVERFLOW"><code>OVERFLOW</code></a>. This event can be used by the
consumer as a trigger to re-examine the state of the object.

<p> When an event is reported to indicate that a file in a watched directory
has been modified then there is no guarantee that the program (or programs)
that have modified the file have completed. Care should be taken to coordinate
access with other programs that may be updating the file.
The <a href="../channels/FileChannel.html" title="class in java.nio.channels"><code>FileChannel</code></a> class defines methods
to lock regions of a file against access by other programs.

<h2 id="platform-dependencies-heading">Platform dependencies</h2>

<p> The implementation that observes events from the file system is intended
to map directly on to the native file event notification facility where
available, or to use a primitive mechanism, such as polling, when a native
facility is not available. Consequently, many of the details on how events
are detected, their timeliness, and whether their ordering is preserved are
highly implementation specific. For example, when a file in a watched
directory is modified then it may result in a single <a href="StandardWatchEventKinds.html#ENTRY_MODIFY"><code>ENTRY_MODIFY</code></a> event in some
implementations but several events in other implementations. Short-lived
files (meaning files that are deleted very quickly after they are created)
may not be detected by primitive implementations that periodically poll the
file system to detect changes.

<p> If a watched file is not located on a local storage device then it is
implementation specific if changes to the file can be detected. In particular,
it is not required that changes to files carried out on remote systems be
detected.</div>
<dl class="notes">
<dt>Implementation Note:</dt>
<dd>The JDK's <code>WatchService</code> implementations buffer up to 512 pending
events for each registered watchable object. If this limit is exceeded,
pending events are discarded and the special
<a href="StandardWatchEventKinds.html#OVERFLOW"><code>OVERFLOW</code></a> event is queued. This
special event is the trigger to re-examine the state of the object, e.g.
scan a watched directory to get an updated list of the files in the
directory. The limit for the pending events can be changed from its default
with the system property
<code><span id="jdk.nio.file.WatchService.maxEventsPerPoll" class="search-tag-result">jdk.nio.file.WatchService.maxEventsPerPoll</span></code>
set to a value that parses as a positive integer. This may be useful in
environments where there is a high volume of changes and where the impact
of discarded events is high.</dd>
<dt>Since:</dt>
<dd>1.7</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="FileSystem.html#newWatchService()"><code>FileSystem.newWatchService()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Closes this watch service.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="WatchKey.html" title="interface in java.nio.file">WatchKey</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#poll()" class="member-name-link">poll</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Retrieves and removes the next watch key, or <code>null</code> if none are
present.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="WatchKey.html" title="interface in java.nio.file">WatchKey</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#poll(long,java.util.concurrent.TimeUnit)" class="member-name-link">poll</a><wbr>(long&nbsp;timeout,
 <a href="../../util/concurrent/TimeUnit.html" title="enum class in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Retrieves and removes the next watch key, waiting if necessary up to the
specified wait time if none are yet present.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="WatchKey.html" title="interface in java.nio.file">WatchKey</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#take()" class="member-name-link">take</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Retrieves and removes next watch key, waiting if none are yet present.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()
    throws <span class="exceptions"><a href="../../io/IOException.html" title="class in java.io">IOException</a></span></div>
<div class="block">Closes this watch service.

<p> If a thread is currently blocked in the <a href="#take()"><code>take</code></a> or <a href="#poll(long,java.util.concurrent.TimeUnit)"><code>poll</code></a> methods waiting for a key to be queued then
it immediately receives a <a href="ClosedWatchServiceException.html" title="class in java.nio.file"><code>ClosedWatchServiceException</code></a>. Any
valid keys associated with this watch service are <a href="WatchKey.html#isValid()"><code>invalidated</code></a>.

<p> After a watch service is closed, any further attempt to invoke
operations upon it will throw <a href="ClosedWatchServiceException.html" title="class in java.nio.file"><code>ClosedWatchServiceException</code></a>.
If this watch service is already closed then invoking this method
has no effect.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../lang/AutoCloseable.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../lang/AutoCloseable.html" title="interface in java.lang">AutoCloseable</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="../../io/Closeable.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../io/Closeable.html" title="interface in java.io">Closeable</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="../../io/IOException.html" title="class in java.io">IOException</a></code> - if an I/O error occurs</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="poll()">
<h3>poll</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="WatchKey.html" title="interface in java.nio.file">WatchKey</a></span>&nbsp;<span class="element-name">poll</span>()</div>
<div class="block">Retrieves and removes the next watch key, or <code>null</code> if none are
present.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the next watch key, or <code>null</code></dd>
<dt>Throws:</dt>
<dd><code><a href="ClosedWatchServiceException.html" title="class in java.nio.file">ClosedWatchServiceException</a></code> - if this watch service is closed</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="poll(long,java.util.concurrent.TimeUnit)">
<h3>poll</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="WatchKey.html" title="interface in java.nio.file">WatchKey</a></span>&nbsp;<span class="element-name">poll</span><wbr><span class="parameters">(long&nbsp;timeout,
 <a href="../../util/concurrent/TimeUnit.html" title="enum class in java.util.concurrent">TimeUnit</a>&nbsp;unit)</span>
       throws <span class="exceptions"><a href="../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></span></div>
<div class="block">Retrieves and removes the next watch key, waiting if necessary up to the
specified wait time if none are yet present.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeout</code> - how long to wait before giving up, in units of unit</dd>
<dd><code>unit</code> - a <code>TimeUnit</code> determining how to interpret the timeout
         parameter</dd>
<dt>Returns:</dt>
<dd>the next watch key, or <code>null</code></dd>
<dt>Throws:</dt>
<dd><code><a href="ClosedWatchServiceException.html" title="class in java.nio.file">ClosedWatchServiceException</a></code> - if this watch service is closed, or it is closed while waiting
         for the next key</dd>
<dd><code><a href="../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if interrupted while waiting</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="take()">
<h3>take</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="WatchKey.html" title="interface in java.nio.file">WatchKey</a></span>&nbsp;<span class="element-name">take</span>()
       throws <span class="exceptions"><a href="../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></span></div>
<div class="block">Retrieves and removes next watch key, waiting if none are yet present.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the next watch key</dd>
<dt>Throws:</dt>
<dd><code><a href="ClosedWatchServiceException.html" title="class in java.nio.file">ClosedWatchServiceException</a></code> - if this watch service is closed, or it is closed while waiting
         for the next key</dd>
<dd><code><a href="../../lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if interrupted while waiting</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase25&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2025, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java25speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 25.0.1+8-LTS-27 --></small></p>
</footer>
</main>
</div>
</body>
</html>
