<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>Reference (Java SE 25 &amp; JDK 25)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: module: java.base, package: java.lang.ref, class: Reference">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="java.lang.ref.Reference class">
<meta name="keywords" content="get()">
<meta name="keywords" content="refersTo()">
<meta name="keywords" content="clear()">
<meta name="keywords" content="isEnqueued()">
<meta name="keywords" content="enqueue()">
<meta name="keywords" content="clone()">
<meta name="keywords" content="reachabilityFence()">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Reference.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><div><strong>Java SE 25 &amp; JDK 25</strong> </div></div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../../module-summary.html">java.base</a></li>
<li><a href="package-summary.html">java.lang.ref</a></li>
<li><a href="Reference.html" class="current-selection">Reference</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#get()" tabindex="0">get()</a></li>
<li><a href="#refersTo(T)" tabindex="0">refersTo(T)</a></li>
<li><a href="#clear()" tabindex="0">clear()</a></li>
<li><a href="#isEnqueued()" tabindex="0">isEnqueued()</a></li>
<li><a href="#enqueue()" tabindex="0">enqueue()</a></li>
<li><a href="#clone()" tabindex="0">clone()</a></li>
<li><a href="#reachabilityFence(java.lang.Object)" tabindex="0">reachabilityFence(Object)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class Reference" class="title">Class Reference&lt;T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="../Object.html" title="class in java.lang">java.lang.Object</a>
<div class="inheritance">java.lang.ref.Reference&lt;T&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><span id="type-param-T"><code>T</code> - the type of the referent</span></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="PhantomReference.html" title="class in java.lang.ref">PhantomReference</a>, <a href="SoftReference.html" title="class in java.lang.ref">SoftReference</a>, <a href="WeakReference.html" title="class in java.lang.ref">WeakReference</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public abstract sealed class </span><span class="element-name type-name-label">Reference&lt;T&gt;</span>
<span class="extends-implements">extends <a href="../Object.html" title="class in java.lang">Object</a></span>
<span class="permits">permits <a href="PhantomReference.html" title="class in java.lang.ref">PhantomReference</a>&lt;T&gt;, <a href="SoftReference.html" title="class in java.lang.ref">SoftReference</a>&lt;T&gt;, <a href="WeakReference.html" title="class in java.lang.ref">WeakReference</a>&lt;T&gt; <span class="permits-note">(not exhaustive)</span></span></div>
<div class="block">Abstract base class for reference objects.  This class defines the
operations common to all reference objects.  Because reference objects are
implemented in close cooperation with the garbage collector, this class may
not be subclassed directly.</div>
<dl class="notes"><dt>Sealed Class Hierarchy Graph:</dt><dd><a class="sealed-graph" href="Reference-sealed-graph.svg"><img style="vertical-align:top" alt="Sealed class hierarchy graph for Reference" src="Reference-sealed-graph.svg" height="100"><span><img style="border: solid lightgray 1px; vertical-align:top" alt="Sealed class hierarchy graph for Reference" src="Reference-sealed-graph.svg"></span></a></dd>
<dt>Since:</dt>
<dd>1.2</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button><button id="method-summary-table-tab6" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab6', 3)" class="table-tab">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clear()" class="member-name-link">clear</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clears this reference object.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../Object.html" title="class in java.lang">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clone()" class="member-name-link">clone</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Throws <a href="../CloneNotSupportedException.html" title="class in java.lang"><code>CloneNotSupportedException</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enqueue()" class="member-name-link">enqueue</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clears this reference object, then attempts to add it to the queue with
which it is registered, if any.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#type-param-T" title="type parameter in Reference">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#get()" class="member-name-link">get</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns this reference object's referent.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#isEnqueued()" class="member-name-link">isEnqueued</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">This method was originally specified to test if a reference object has
been cleared and enqueued but was never implemented to do this test.</div>
</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#reachabilityFence(java.lang.Object)" class="member-name-link">reachabilityFence</a><wbr>(<a href="../Object.html" title="class in java.lang">Object</a>&nbsp;ref)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Ensures that the given object remains
<a href="package-summary.html#reachability"><em>strongly reachable</em></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#refersTo(T)" class="member-name-link">refersTo</a><wbr>(<a href="#type-param-T" title="type parameter in Reference">T</a>&nbsp;obj)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tests if the referent of this reference object is <code>obj</code>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class&nbsp;<a href="../Object.html#method-summary" title="class in java.lang">Object</a></h3>
<code><a href="../Object.html#equals(java.lang.Object)" title="equals(Object)">equals</a>, <a href="../Object.html#finalize()" title="finalize()">finalize</a>, <a href="../Object.html#getClass()" title="getClass()">getClass</a>, <a href="../Object.html#hashCode()" title="hashCode()">hashCode</a>, <a href="../Object.html#notify()" title="notify()">notify</a>, <a href="../Object.html#notifyAll()" title="notifyAll()">notifyAll</a>, <a href="../Object.html#toString()" title="toString()">toString</a>, <a href="../Object.html#wait()" title="wait()">wait</a>, <a href="../Object.html#wait(long)" title="wait(long)">wait</a>, <a href="../Object.html#wait(long,int)" title="wait(long, int)">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="get()">
<h3>get</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="#type-param-T" title="type parameter in Reference">T</a></span>&nbsp;<span class="element-name">get</span>()</div>
<div class="block">Returns this reference object's referent.  If this reference object has
been cleared, either by the program or by the garbage collector, then
this method returns <code>null</code>.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>This method returns a strong reference to the referent. This may cause
the garbage collector to treat it as strongly reachable until some later
collection cycle.  The <a href="#refersTo(T)"><code>refersTo</code></a> method can be
used to avoid such strengthening when testing whether some object is
the referent of a reference object; that is, use <code>ref.refersTo(obj)</code>
rather than <code>ref.get() == obj</code>.</dd>
<dt>Returns:</dt>
<dd>The object to which this reference refers, or
          <code>null</code> if this reference object has been cleared</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#refersTo(T)"><code>refersTo(T)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="refersTo(T)">
<h3 id="refersTo(java.lang.Object)">refersTo</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">refersTo</span><wbr><span class="parameters">(<a href="#type-param-T" title="type parameter in Reference">T</a>&nbsp;obj)</span></div>
<div class="block">Tests if the referent of this reference object is <code>obj</code>.
Using a <code>null</code> <code>obj</code> returns <code>true</code> if the
reference object has been cleared.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>obj</code> - the object to compare with this reference object's referent</dd>
<dt>Returns:</dt>
<dd><code>true</code> if <code>obj</code> is the referent of this reference object</dd>
<dt>Since:</dt>
<dd>16</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="clear()">
<h3>clear</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clear</span>()</div>
<div class="block">Clears this reference object. Invoking this method does not enqueue this
object, and the garbage collector will not clear or enqueue this object.

<p>When the garbage collector or the <a href="#enqueue()"><code>enqueue()</code></a> method clear
references they do so directly, without invoking this method.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>There is a potential race condition with the garbage collector. When this
method is called, the garbage collector may already be in the process of
(or already completed) clearing and/or enqueueing this reference.
Avoid this race by ensuring the referent remains strongly reachable until
after the call to clear(), using <a href="#reachabilityFence(java.lang.Object)"><code>reachabilityFence(Object)</code></a> if
necessary.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEnqueued()">
<h3>isEnqueued</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="annotations"><a href="../Deprecated.html" title="annotation interface in java.lang">@Deprecated</a>(<a href="../Deprecated.html#since()">since</a>="16")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEnqueued</span>()</div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">This method was originally specified to test if a reference object has
been cleared and enqueued but was never implemented to do this test.
This method could be misused due to the inherent race condition
or without an associated <code>ReferenceQueue</code>.
An application relying on this method to release critical resources
could cause serious performance issue.
An application should use <a href="ReferenceQueue.html" title="class in java.lang.ref"><code>ReferenceQueue</code></a> to reliably determine
what reference objects that have been enqueued or
<a href="#refersTo(T)"><code>refersTo(null)</code></a> to determine if this reference
object has been cleared.</div>
</div>
<div class="block">Tests if this reference object is in its associated queue, if any.
This method returns <code>true</code> only if all of the following conditions
are met:
<ul>
<li>this reference object was registered with a queue when it was created; and
<li>the garbage collector has added this reference object to the queue
    or <a href="#enqueue()"><code>enqueue()</code></a> is called; and
<li>this reference object is not yet removed from the queue.
</ul>
Otherwise, this method returns <code>false</code>.
This method may return <code>false</code> if this reference object has been cleared
but not enqueued due to the race condition.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if and only if this reference object is
          in its associated queue (if any).</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="enqueue()">
<h3>enqueue</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">enqueue</span>()</div>
<div class="block">Clears this reference object, then attempts to add it to the queue with
which it is registered, if any.

<p>If this reference is registered with a queue but not yet enqueued,
the reference is added to the queue; this method is
<b><i>successful</i></b> and returns true.
If this reference is not registered with a queue, or was already enqueued
(by the garbage collector, or a previous call to <code>enqueue</code>), this
method is <b><i>unsuccessful</i></b> and returns false.

<p><a href="package-summary.html#MemoryConsistency">Memory consistency effects</a>:
Actions in a thread prior to a <b><i>successful</i></b> call to <code>enqueue</code>
<a href="../../../../java.base/java/util/concurrent/package-summary.html#MemoryVisibility"><i>happen-before</i></a>
the reference is removed from the queue by <a href="ReferenceQueue.html#poll()"><code>ReferenceQueue.poll()</code></a>
or <a href="ReferenceQueue.html#remove(long)"><code>ReferenceQueue.remove(long)</code></a>. <b><i>Unsuccessful</i></b> calls to
<code>enqueue</code> have no specified memory consistency effects.

<p> When this method clears references it does so directly, without
invoking the <a href="#clear()"><code>clear()</code></a> method. When the garbage collector clears
and enqueues references it does so directly, without invoking the
<a href="#clear()"><code>clear()</code></a> method or this method.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>Use of this method allows the registered queue's
<a href="ReferenceQueue.html#poll()"><code>ReferenceQueue.poll()</code></a> and <a href="ReferenceQueue.html#remove(long)"><code>ReferenceQueue.remove(long)</code></a> methods
to return this reference even though the referent may still be strongly
reachable.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if this reference object was successfully
          enqueued; <code>false</code> if it was already enqueued or if
          it was not registered with a queue when it was created</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="clone()">
<h3>clone</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../Object.html" title="class in java.lang">Object</a></span>&nbsp;<span class="element-name">clone</span>()
                throws <span class="exceptions"><a href="../CloneNotSupportedException.html" title="class in java.lang">CloneNotSupportedException</a></span></div>
<div class="block">Throws <a href="../CloneNotSupportedException.html" title="class in java.lang"><code>CloneNotSupportedException</code></a>. A <code>Reference</code> cannot be
meaningfully cloned. Construct a new <code>Reference</code> instead.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../Object.html#clone()">clone</a></code>&nbsp;in class&nbsp;<code><a href="../Object.html" title="class in java.lang">Object</a></code></dd>
<dt>Returns:</dt>
<dd>never returns normally</dd>
<dt>Throws:</dt>
<dd><code><a href="../CloneNotSupportedException.html" title="class in java.lang">CloneNotSupportedException</a></code> - always</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../Cloneable.html" title="interface in java.lang"><code>Cloneable</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="reachabilityFence(java.lang.Object)">
<h3>reachabilityFence</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">reachabilityFence</span><wbr><span class="parameters">(<a href="../Object.html" title="class in java.lang">Object</a>&nbsp;ref)</span></div>
<div class="block">Ensures that the given object remains
<a href="package-summary.html#reachability"><em>strongly reachable</em></a>.
This reachability is assured regardless of any optimizing transformations
the virtual machine may perform that might otherwise allow the object to
become unreachable (see JLS <a href="https://docs.oracle.com/javase/specs/jls/se25/html/jls-12.html#jls-12.6.1">12.6.1</a>). Thus, the given object is not
reclaimable by garbage collection at least until after the invocation of
this method. References to the given object will not be cleared (or
enqueued, if applicable) by the garbage collector until after invocation
of this method.
Invocation of this method does not itself initiate reference processing,
garbage collection, or finalization.

<p> This method establishes an ordering for <em>strong reachability</em>
with respect to garbage collection.  It controls relations that are
otherwise only implicit in a program -- the reachability conditions
triggering garbage collection.  This method is applicable only
when reclamation may have visible effects,
such as for objects that use finalizers or <code>Cleaner</code>, or code that
performs <a href="package-summary.html">reference processing</a>.

<p><a href="package-summary.html#MemoryConsistency">Memory consistency effects</a>:
Actions in a thread prior to calling <code>reachabilityFence(x)</code>
<a href="../../../../java.base/java/util/concurrent/package-summary.html#MemoryVisibility"><i>happen-before</i></a>
the garbage collector clears any reference to <code>x</code>.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>Reference processing or finalization can occur after an object becomes
unreachable. An object can become unreachable when the virtual machine
detects that there is no further need for the object (other than for
running a finalizer). In the course of optimization, the virtual machine
can reorder operations of an object's methods such that the object
becomes unneeded earlier than might naively be expected &mdash;
including while a method of the object is still running. For instance,
the VM can move the loading of <em>values</em> from the object's fields
to occur earlier. The object itself is then no longer needed and becomes
unreachable, and the method can continue running using the obtained values.
This may have surprising and undesirable effects when using a Cleaner or
finalizer for cleanup: there is a race between the
program thread running the method, and the cleanup thread running the
Cleaner or finalizer. The cleanup thread could free a
resource, followed by the program thread (still running the method)
attempting to access the now-already-freed resource.
Use of <code>reachabilityFence</code> can prevent this race by ensuring that the
object remains strongly reachable.
<p>
The following is an example in which the bookkeeping associated with a class is
managed through array indices.  Here, method <code>action</code> uses a
<code>reachabilityFence</code> to ensure that the <code>Resource</code> object is
not reclaimed before bookkeeping on an associated
<code>ExternalResource</code> has been performed; specifically, to
ensure that the array slot holding the <code>ExternalResource</code> is not
nulled out in method <a href="../Object.html#finalize()"><code>Object.finalize()</code></a>, which may otherwise run
concurrently.

<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-reachabilityFence(java.lang.Object)1"><code class="language-java">class Resource {
  private static ExternalResource[] externalResourceArray = ...

  int myIndex;
  Resource(...) {
    this.myIndex = ...
    externalResourceArray[myIndex] = ...;
    ...
  }
  protected void finalize() {
    externalResourceArray[this.myIndex] = null;
    ...
  }
  public void action() {
    try {
      // ...
      int i = this.myIndex; // last use of 'this' Resource in action()
      Resource.update(externalResourceArray[i]);
    } finally {
      Reference.reachabilityFence(this);
    }
  }
  private static void update(ExternalResource ext) {
    ext.status = ...;
  }
}
</code></pre>
</div>


The invocation of <code>reachabilityFence</code> is
placed <em>after</em> the call to <code>update</code>, to ensure that the
array slot is not nulled out by <a href="../Object.html#finalize()"><code>Object.finalize()</code></a> before the
update, even if the call to <code>action</code> was the last use of this
object.  This might be the case if, for example, a usage in a user program
had the form <code>new Resource().action();</code> which retains no other
reference to this <code>Resource</code>.
The <code>reachabilityFence</code> call is placed in a <code>finally</code> block to
ensure that it is invoked across all paths in the method. A more complex
method might need further precautions to ensure that
<code>reachabilityFence</code> is encountered along all code paths.

<p> Method <code>reachabilityFence</code> is not required in constructions
that themselves ensure reachability.  For example, because objects that
are locked cannot, in general, be reclaimed, it would suffice if all
accesses of the object, in all methods of class <code>Resource</code>
(including <code>finalize</code>) were enclosed in <code>synchronized (this)</code>
blocks.  (Further, such blocks must not include infinite loops, or
themselves be unreachable, which fall into the corner case exceptions to
the "in general" disclaimer.)  However, method <code>reachabilityFence</code>
remains a better option in cases where synchronization is not as efficient,
desirable, or possible; for example because it would encounter deadlock.</dd>
<dt>Parameters:</dt>
<dd><code>ref</code> - the reference to the object to keep strongly reachable. If
<code>null</code>, this method has no effect.</dd>
<dt>Since:</dt>
<dd>9</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase25&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2025, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java25speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <!-- Version 25.0.1+8-LTS-27 --></small></p>
</footer>
</main>
</div>
</body>
</html>
